(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{502:function(a,s,t){"use strict";t.r(s);var e=t(14),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"kafka-运维指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-运维指南"}},[a._v("#")]),a._v(" Kafka 运维指南")]),a._v(" "),t("blockquote",[t("p",[a._v("环境要求：")]),a._v(" "),t("ul",[t("li",[a._v("JDK8")]),a._v(" "),t("li",[a._v("ZooKeeper")])])]),a._v(" "),t("h2",{attrs:{id:"一、kafka-单点部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、kafka-单点部署"}},[a._v("#")]),a._v(" 一、Kafka 单点部署")]),a._v(" "),t("h3",{attrs:{id:"下载解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载解压"}},[a._v("#")]),a._v(" 下载解压")]),a._v(" "),t("p",[a._v("进入官方下载地址："),t("a",{attrs:{href:"http://kafka.apache.org/downloads%EF%BC%8C%E9%80%89%E6%8B%A9%E5%90%88%E9%80%82%E7%89%88%E6%9C%AC%E3%80%82",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://kafka.apache.org/downloads，选择合适版本。"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("解压到本地：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -xzf kafka_2.11-1.1.0.tgz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" kafka_2.11-1.1.0\n")])])]),t("p",[a._v("现在您已经在您的机器上下载了最新版本的 Kafka。")]),a._v(" "),t("h3",{attrs:{id:"启动服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动服务器"}},[a._v("#")]),a._v(" 启动服务器")]),a._v(" "),t("p",[a._v("由于 Kafka 依赖于 ZooKeeper，所以运行前需要先启动 ZooKeeper")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ bin/zookeeper-server-start.sh config/zookeeper.properties\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2013")]),a._v("-04-22 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":01:37,495"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Reading configuration from: config/zookeeper.properties "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.quorum.QuorumPeerConfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("p",[a._v("然后，启动 Kafka")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ bin/kafka-server-start.sh config/server.properties\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2013")]),a._v("-04-22 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":01:47,028"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Verifying properties "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("kafka.utils.VerifiableProperties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2013")]),a._v("-04-22 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":01:47,051"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Property socket.send.buffer.bytes is overridden to "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1048576")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("kafka.utils.VerifiableProperties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("h3",{attrs:{id:"停止服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#停止服务器"}},[a._v("#")]),a._v(" 停止服务器")]),a._v(" "),t("p",[a._v("执行所有操作后，可以使用以下命令停止服务器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("bin/kafka-server-stop.sh config/server.properties\n")])])]),t("h2",{attrs:{id:"二、kafka-集群部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、kafka-集群部署"}},[a._v("#")]),a._v(" 二、Kafka 集群部署")]),a._v(" "),t("h3",{attrs:{id:"修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[a._v("#")]),a._v(" 修改配置")]),a._v(" "),t("p",[a._v("复制配置为多份（Windows 使用 copy 命令代理）：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" config/server.properties config/server-1.properties\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" config/server.properties config/server-2.properties\n")])])]),t("p",[a._v("修改配置：")]),a._v(" "),t("div",{staticClass:"language-properties extra-class"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("config/server-1.properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("broker.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("listeners")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("PLAINTEXT://:9093")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("log.dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("/tmp/kafka-logs-1")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("config/server-2.properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("broker.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("listeners")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("PLAINTEXT://:9094")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("log.dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("/tmp/kafka-logs-2")]),a._v("\n")])])]),t("p",[a._v("其中，broker.id 这个参数必须是唯一的。")]),a._v(" "),t("p",[a._v("端口故意配置的不一致，是为了可以在一台机器启动多个应用节点。")]),a._v(" "),t("h3",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),t("p",[a._v("根据这两份配置启动三个服务器节点：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ bin/kafka-server-start.sh config/server.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n$ bin/kafka-server-start.sh config/server-1.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n$ bin/kafka-server-start.sh config/server-2.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("p",[a._v("创建一个新的 Topic 使用 三个备份：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" --topic my-replicated-topic\n")])])]),t("p",[a._v("查看主题：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ bin/kafka-topics.sh --describe --zookeeper localhost:2181 --topic my-replicated-topic\nTopic:my-replicated-topic   PartitionCount:1    ReplicationFactor:3 Configs:\n    Topic: my-replicated-topic  Partition: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("    Leader: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("   Replicas: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1,2")]),a._v(",0 Isr: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1,2")]),a._v(",0\n")])])]),t("ul",[t("li",[a._v("leader - 负责指定分区的所有读取和写入的节点。每个节点将成为随机选择的分区部分的领导者。")]),a._v(" "),t("li",[a._v("replicas - 是复制此分区日志的节点列表，无论它们是否为领导者，或者即使它们当前处于活动状态。")]),a._v(" "),t("li",[a._v("isr - 是“同步”复制品的集合。这是副本列表的子集，该列表当前处于活跃状态并且已经被领导者捕获。")])]),a._v(" "),t("h2",{attrs:{id:"三、kafka-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、kafka-命令"}},[a._v("#")]),a._v(" 三、Kafka 命令")]),a._v(" "),t("h3",{attrs:{id:"主题（topic）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主题（topic）"}},[a._v("#")]),a._v(" 主题（Topic）")]),a._v(" "),t("h4",{attrs:{id:"创建-topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-topic"}},[a._v("#")]),a._v(" 创建 Topic")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-topics --create --zookeeper localhost:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" --topic my-topic\n")])])]),t("h4",{attrs:{id:"查看-topic-列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-topic-列表"}},[a._v("#")]),a._v(" 查看 Topic 列表")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-topics --list --zookeeper localhost:2181\n")])])]),t("h4",{attrs:{id:"添加-partition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加-partition"}},[a._v("#")]),a._v(" 添加 Partition")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-topics --zookeeper localhost:2181 --alter --topic my-topic --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v("\n")])])]),t("h4",{attrs:{id:"删除-topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除-topic"}},[a._v("#")]),a._v(" 删除 Topic")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-topics --zookeeper localhost:2181 --delete --topic my-topic\n")])])]),t("h4",{attrs:{id:"查看-topic-详细信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-topic-详细信息"}},[a._v("#")]),a._v(" 查看 Topic 详细信息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-topics --zookeeper localhost:2181/kafka-cluster --describe\n")])])]),t("h4",{attrs:{id:"查看备份分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看备份分区"}},[a._v("#")]),a._v(" 查看备份分区")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-topics --zookeeper localhost:2181/kafka-cluster --describe --under-replicated-partitions\n")])])]),t("h3",{attrs:{id:"生产者（producers）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生产者（producers）"}},[a._v("#")]),a._v(" 生产者（Producers）")]),a._v(" "),t("h4",{attrs:{id:"通过控制台输入生产消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过控制台输入生产消息"}},[a._v("#")]),a._v(" 通过控制台输入生产消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-console-producer --broker-list localhost:9092 --topic my-topic\n")])])]),t("h4",{attrs:{id:"通过文件输入生产消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过文件输入生产消息"}},[a._v("#")]),a._v(" 通过文件输入生产消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-console-producer --broker-list localhost:9092 --topic "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" messages.txt\n")])])]),t("h4",{attrs:{id:"通过控制台输入-avro-生产消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过控制台输入-avro-生产消息"}},[a._v("#")]),a._v(" 通过控制台输入 Avro 生产消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-avro-console-producer --broker-list localhost:9092 --topic my.Topic --property value.schema"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"type":"record","name":"myrecord","fields":[{"name":"f1","type":"string"}]}\'')]),a._v(" --property schema.registry.url"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://localhost:8081\n")])])]),t("p",[a._v("然后，可以选择输入部分 json key：")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"f1"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"value1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h4",{attrs:{id:"生成消息性能测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成消息性能测试"}},[a._v("#")]),a._v(" 生成消息性能测试")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-producer-perf-test --topic position-reports --throughput "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10000")]),a._v(" --record-size "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("300")]),a._v(" --num-records "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20000")]),a._v(" --producer-props bootstrap.servers"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"localhost:9092"')]),a._v("\n")])])]),t("h3",{attrs:{id:"消费者（consumers）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费者（consumers）"}},[a._v("#")]),a._v(" 消费者（Consumers）")]),a._v(" "),t("h4",{attrs:{id:"消费所有未消费的消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费所有未消费的消息"}},[a._v("#")]),a._v(" 消费所有未消费的消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-console-consumer --bootstrap-server localhost:9092 --topic my-topic --from-beginning\n")])])]),t("h4",{attrs:{id:"消费一条消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费一条消息"}},[a._v("#")]),a._v(" 消费一条消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-console-consumer --bootstrap-server localhost:9092 --topic my-topic  --max-messages "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("h4",{attrs:{id:"从指定的-offset-消费一条消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从指定的-offset-消费一条消息"}},[a._v("#")]),a._v(" 从指定的 offset 消费一条消息")]),a._v(" "),t("p",[a._v("从指定的 offset "),t("code",[a._v("__consumer_offsets")]),a._v(" 消费一条消息：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-console-consumer --bootstrap-server localhost:9092 --topic __consumer_offsets --formatter "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'kafka.coordinator.GroupMetadataManager"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$OffsetsMessageFormatter")]),a._v("'")]),a._v(" --max-messages "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("h4",{attrs:{id:"从指定-group-消费消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从指定-group-消费消息"}},[a._v("#")]),a._v(" 从指定 Group 消费消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-console-consumer --topic my-topic --new-consumer --bootstrap-server localhost:9092 --consumer-property group.id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("my-group\n")])])]),t("h4",{attrs:{id:"消费-avro-消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费-avro-消息"}},[a._v("#")]),a._v(" 消费 avro 消息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-avro-console-consumer --topic position-reports --new-consumer --bootstrap-server localhost:9092 --from-beginning --property schema.registry.url"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost:8081 --max-messages "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-avro-console-consumer --topic position-reports --new-consumer --bootstrap-server localhost:9092 --from-beginning --property schema.registry.url"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost:8081\n")])])]),t("h4",{attrs:{id:"查看消费者-group-列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看消费者-group-列表"}},[a._v("#")]),a._v(" 查看消费者 Group 列表")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-consumer-groups --new-consumer --list --bootstrap-server localhost:9092\n")])])]),t("h4",{attrs:{id:"查看消费者-group-详细信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看消费者-group-详细信息"}},[a._v("#")]),a._v(" 查看消费者 Group 详细信息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-consumer-groups --bootstrap-server localhost:9092 --describe --group testgroup\n")])])]),t("h3",{attrs:{id:"配置（config）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置（config）"}},[a._v("#")]),a._v(" 配置（Config）")]),a._v(" "),t("h4",{attrs:{id:"设置-topic-的保留时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置-topic-的保留时间"}},[a._v("#")]),a._v(" 设置 Topic 的保留时间")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-configs --zookeeper localhost:2181 --alter --entity-type topics --entity-name my-topic --add-config retention.ms"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3600000")]),a._v("\n")])])]),t("h4",{attrs:{id:"查看-topic-的所有配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-topic-的所有配置"}},[a._v("#")]),a._v(" 查看 Topic 的所有配置")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-configs --zookeeper localhost:2181 --describe --entity-type topics --entity-name my-topic\n")])])]),t("h4",{attrs:{id:"修改-topic-的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-topic-的配置"}},[a._v("#")]),a._v(" 修改 Topic 的配置")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-configs --zookeeper localhost:2181 --alter --entity-type topics --entity-name my-topic --delete-config retention.ms\n")])])]),t("h3",{attrs:{id:"acl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#acl"}},[a._v("#")]),a._v(" ACL")]),a._v(" "),t("h4",{attrs:{id:"查看指定-topic-的-acl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看指定-topic-的-acl"}},[a._v("#")]),a._v(" 查看指定 Topic 的 ACL")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-acls --authorizer-properties zookeeper.connect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost:2181 --list --topic topicA\n")])])]),t("h4",{attrs:{id:"添加-acl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加-acl"}},[a._v("#")]),a._v(" 添加 ACL")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-acls --authorizer-properties zookeeper.connect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost:2181 --add --allow-principal User:Bob --consumer --topic topicA --group groupA\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka-acls --authorizer-properties zookeeper.connect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost:2181 --add --allow-principal User:Bob --producer --topic topicA\n")])])]),t("h3",{attrs:{id:"zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper"}},[a._v("#")]),a._v(" ZooKeeper")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("zookeeper-shell localhost:2182 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" /\n")])])]),t("h2",{attrs:{id:"四、kakfa-工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、kakfa-工具"}},[a._v("#")]),a._v(" 四、Kakfa 工具")]),a._v(" "),t("ul",[t("li",[t("strong",[t("a",{attrs:{href:"https://github.com/yahoo/kafka-manager",target:"_blank",rel:"noopener noreferrer"}},[a._v("kafka-manager"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("strong",[t("a",{attrs:{href:"https://github.com/quantifind/KafkaOffsetMonitor",target:"_blank",rel:"noopener noreferrer"}},[a._v("KafkaOffsetMonitor"),t("OutboundLink")],1)])])]),a._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("官方")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/apache/kafka",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kakfa Github"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/documentation/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kakfa 官方文档"),t("OutboundLink")],1)])])]),a._v(" "),t("li",[t("strong",[a._v("文章")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/lensesio/kafka-cheat-sheet",target:"_blank",rel:"noopener noreferrer"}},[a._v("kafka-cheat-sheet"),t("OutboundLink")],1)])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);